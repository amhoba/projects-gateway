# dynamic.yml
http:
  routers:
    clipfinity-router:
      rule: "Host(`clipfinity.space`)"
      service: "clipfinity-service"
      entryPoints:
        - "web"
        - "websecure"
      tls:
        certResolver: "myresolver"

    # Redirect HTTP to HTTPS
    clipfinity-redirect:
      rule: "Host(`clipfinity.space`)"
      entryPoints:
        - "web"
      middlewares:
        - "redirect-to-https"
      service: "clipfinity-service"

  services:
    clipfinity-service:
      loadBalancer:
        servers:
          - url: "http://34.34.34.34:8000"

  middlewares:
    redirect-to-https:
      redirectScheme:
        scheme: https
        permanent: true

