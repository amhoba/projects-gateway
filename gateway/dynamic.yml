# dynamic.yml
http:
  routers:
    bitpulse-online-router:
      rule: "Host(`bitpulse.online`)"
      service: "bitpulse-online-service"
      entryPoints:
        - "web"
        - "websecure"
      tls:
        certResolver: "myresolver"

    clipfinity-space-router:
      rule: "Host(`clipfinity.space`)"
      service: "clipfinity-space-service"
      entryPoints:
        - "web"
        - "websecure"
      tls:
        certResolver: "myresolver"

    bitpulse-online-redirect:
      rule: "Host(`bitpulse.online`)"
      entryPoints:
        - "web"
      middlewares:
        - "redirect-to-https"
      service: "bitpulse-online-service"

    clipfinity-space-redirect:
      rule: "Host(`clipfinity.space`)"
      entryPoints:
        - "web"
      middlewares:
        - "redirect-to-https"
      service: "clipfinity-space-service"

  services:
    bitpulse-online-service:
      loadBalancer:
        servers:
          - url: "http://78.157.214.115:8000"

    clipfinity-space-service:
      loadBalancer:
        servers:
          - url: "http://78.157.214.115:8001"

  middlewares:
    redirect-to-https:
      redirectScheme:
        scheme: https
        permanent: true